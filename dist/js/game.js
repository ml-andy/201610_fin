"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),HeaderModel=function(){function t(){_classCallCheck(this,t),this.header=$(".header"),this.menu=$(".menu"),this.menubtn=this.header.find(".menubtn"),this.menubtn.on("click",function(){this.menubtn.hasClass("on")?this.openmenu(!1):this.openmenu(!0)}.bind(this)),this.menua=this.menu.find(".menua"),this.menua.on("click",function(t){this.menuaClick($(t.currentTarget).attr("class").replace("on","").split("menua ")[1].replace(" ",""),0)}.bind(this))}return _createClass(t,[{key:"openmenu",value:function(t){t?(this.menubtn.addClass("on"),$(".menu").addClass("on")):(this.menubtn.removeClass("on"),$(".menu").removeClass("on"))}},{key:"menuaClick",value:function(t){switch(t){case"m1":window.location.href="login_member.php";break;case"m2":window.location.href="inquire.php";break;case"m3":window.location.href="about.html";break;case"m4":window.location.href="award_info.html";break;case"m5":window.location.href="award_list.html";break;case"m6":console.log("share fb");break;case"m7":window.location.href="game_list.html";break;case"m8":window.location.href="login_number.php";break;case"m9":window.location.href="index.html"}}}]),t}(),Game_list=function t(){_classCallCheck(this,t),console.log("game LIST"),this.page=$(".page.game_list"),this.banner_swiper=new Swiper(".swiper-container",{speed:600,wrapperClass:"swiper-wrapper",slideClass:"swiper-slide",nextButton:$(".next"),prevButton:$(".prev"),slidesPerView:1,spaceBetween:0,loop:!0,autoplay:6e3,autoplayDisableOnInteraction:!1}),this.gobtn=this.page.find(".gobtn"),this.gobtn.on("click",function(t){window.location.href="game"+$(t.currentTarget).parent().attr("num")+".html"}.bind(this))},Game=function(){function t(){_classCallCheck(this,t),this.ready(),this.HeaderModel=new HeaderModel,$(window).load(function(){this.window_load()}.bind(this))}return _createClass(t,[{key:"ready",value:function(){switch(this.page=$(".page"),this.page.attr("class").split("page game ")[1]){case"game_list":this.game_list=new Game_list;break;case"game1":this.game1=new Game1;break;case"game2":this.game2=new Game2;break;case"game3":this.game3=new Game3;break;case"game4":this.game4=new Game4;break;case"game5":this.game5=new Game5}}},{key:"window_load",value:function(){$(".loading").fadeOut()}}]),t}(),GameModel=function e(){_classCallCheck(this,e),this.page=$(".page"),this.info=this.page.find(".info"),this.scoreboard=this.page.find(".scoreboard"),this.clock=this.page.find(".clock"),this.timer=this.clock.find(".timer"),this.score=this.scoreboard.find(".num"),this.startbtn=this.info.find(".startbtn"),this.failPopup=$(".failPopup"),this.again=this.failPopup.find(".again"),this.back=this.failPopup.find(".back"),this.back.on("click",function(){window.location.href="game_list.html"}.bind(this))},Game1=function(){function t(){_classCallCheck(this,t),this.GameModel=new GameModel,this.GameModel.startbtn.on("click",function(){this.Game1Start()}.bind(this)),this.GameModel.again.on("click",function(){this.GameModel.failPopup.fadeOut(),this.Game1Start()}.bind(this)),window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",function(t){this.windowDeviceEvent(t)}.bind(this)),this.ready()}return _createClass(t,[{key:"ready",value:function(){console.log("game1 init"),this.fps=30,this.endTimeout=30,this.nowendTime=this.endTimeout,this.bgspeed=-30,this.waterchildspeed=15,this.passCar=0,this.successCarNum=10,this.start=!1,this.canvas=document.getElementById("game1"),this.stage=new createjs.Stage(this.canvas),this.gamebg=new createjs.Bitmap("images/game1_bg.jpg"),this.gamebgMovieClip=new createjs.MovieClip,this.gamebgMovieClip.addChild(this.gamebg),this.stage.addChild(this.gamebgMovieClip),this.gamebg2=this.gamebg.clone(),this.gamebgMovieClip.addChild(this.gamebg2),$(window).load(function(){this.gamebg.x=(this.gamebg.getTransformedBounds().width-640)/2*-1,this.gamebg2.x=(this.gamebg.getTransformedBounds().width-640)/2*-1,this.gamebgH=this.gamebg.getTransformedBounds().height,this.gamebg2.y=this.gamebgH*-1}.bind(this)),this.waterchild=new createjs.Bitmap("images/game1_bicycle.png"),this.stage.addChild(this.waterchild),this.waterchild.y=814,this.waterchild.x=251,this.carL=new createjs.Bitmap("images/game1_car1.png"),this.stage.addChild(this.carL),this.carL.x=126,this.carL.y=-295,this.carLspeed=0,this.carR=new createjs.Bitmap("images/game1_car2.png"),this.stage.addChild(this.carR),this.carR.x=353,this.carR.y=-295,this.carRspeed=0,this.boom=new createjs.Bitmap("images/game1_fire.png"),this.stage.addChild(this.boom),this.boom.orgX=-1100,this.boom.orgY=-690,this.boomInit(),createjs.Ticker.setFPS(this.fps),createjs.Ticker.addEventListener("tick",this.StageListenter.bind(this))}},{key:"boomInit",value:function(){this.boom.x=this.boom.orgX,this.boom.y=this.boom.orgY}},{key:"GameCarIint",value:function(){this.boomInit(),this.carRspeed=0,this.carR.y=-295,this.carLspeed=0,this.carL.y=-295}},{key:"Game1Start",value:function(){this.passCar=0,this.nowendTime=this.endTimeout,this.GameModel.timer.html(this.nowendTime),this.GameModel.info.fadeOut(),this.GameModel.scoreboard.fadeIn(),this.GameModel.clock.fadeIn(),this.setWaterchildPosition(),this.GameCarIint(),this.start=!0,setTimeout(function(){this.GameRandomCar()}.bind(this),1500),this.countDown()}},{key:"Game1End",value:function(){clearTimeout(this.hitTimeout),this.start=!1,this.passCar>=this.successCarNum?gamePasses():(console.log("Game over"),this.GameModel.failPopup.fadeIn())}},{key:"countDown",value:function(){setTimeout(function(){this.nowendTime-=1,this.GameModel.timer.html(this.nowendTime),this.nowendTime>0?this.countDown():this.Game1End()}.bind(this),1e3)}},{key:"GameRandomCar",value:function(){this.GameCarIint(),this.random=Math.round(1*Math.random()),this.random>0?this.carLspeed=9*this.bgspeed/10*-1:this.carRspeed=1.2*this.bgspeed*-1}},{key:"StageListenter",value:function(){if(this.start){this.gamebgMovieClip.y>=this.gamebgH?this.gamebgMovieClip.y=this.gamebgMovieClip.y-this.gamebgH:this.gamebgMovieClip.y-=this.bgspeed,this.waterchild.x+=this.waterchildspeed,this.waterchild.x<=100?this.waterchild.x=100:this.waterchild.x>=410&&(this.waterchild.x=410),this.carL.y+=this.carLspeed,this.carR.y+=this.carRspeed,this.carL.y>=1095&&(this.passCar+=1,this.GameRandomCar()),this.carR.y>=1095&&(this.passCar+=1,this.GameRandomCar());for(var t=0;t<this.waterchildPointList.length;t++){var e=this.carL.globalToLocal(this.waterchildPointList[t]._x,this.waterchildPointList[t]._y);if(this.carL.hitTest(e.x,e.y))return this.boom.x=this.waterchildPointList[t]._x,this.boom.y=this.waterchildPointList[t]._y,void this.afterHit();var i=this.carR.globalToLocal(this.waterchildPointList[t]._x,this.waterchildPointList[t]._y);if(this.carR.hitTest(i.x,i.y))return this.boom.x=this.waterchildPointList[t]._x,this.boom.y=this.waterchildPointList[t]._y,void this.afterHit()}this.GameModel.score.html(this.passCar)}this.stage.update()}},{key:"afterHit",value:function(){this.start=!1,this.hitTimeout=setTimeout(function(){this.GameRandomCar(),this.start=!0}.bind(this),1e3)}},{key:"windowDeviceEvent",value:function(t){this.start&&(this.waterchildDirection=t.gamma,this.waterchildDirection<=-2?this.waterchildspeed=Math.abs(this.waterchildspeed)*-1:this.waterchildDirection>=2&&(this.waterchildspeed=Math.abs(this.waterchildspeed)),this.setWaterchildPosition())}},{key:"setWaterchildPosition",value:function(){this.waterchildPointList=[{_x:this.waterchild.x+69,_y:this.waterchild.y},{_x:this.waterchild.x+138,_y:this.waterchild.y+133},{_x:this.waterchild.x+69,_y:this.waterchild.y+266},{_x:this.waterchild.x,_y:this.waterchild.y+133},{_x:this.waterchild.x+69,_y:this.waterchild.y+133}]}}]),t}(),Game2=function(){function t(){_classCallCheck(this,t),this.GameModel=new GameModel,this.GameModel.startbtn.on("click",function(){this.GameStart()}.bind(this)),this.GameModel.again.on("click",function(){this.GameModel.failPopup.fadeOut(),this.GameStart()}.bind(this)),this.ready()}return _createClass(t,[{key:"ready",value:function(){console.log("game2 init"),this.fps=30,this.endTimeout=30,this.nowendTime=this.endTimeout,this.passNum=0,this.successCarNum=10,this.start=!1,this.canvas=document.getElementById("game2"),this.stage=new createjs.Stage(this.canvas),createjs.Ticker.setFPS(this.fps),createjs.Ticker.addEventListener("tick",this.StageListenter.bind(this))}},{key:"GameStart",value:function(){this.nowendTime=this.endTimeout,this.GameModel.timer.html(this.nowendTime),this.GameModel.info.fadeOut(),this.GameModel.scoreboard.fadeIn(),this.GameModel.clock.fadeIn(),this.start=!0,this.countDown()}},{key:"GameEnd",value:function(){this.start=!1,this.passNum>=this.successCarNum?gamePasses():(console.log("Game over"),this.GameModel.failPopup.fadeIn())}},{key:"countDown",value:function(){setTimeout(function(){this.nowendTime-=1,this.GameModel.timer.html(this.nowendTime),this.nowendTime>0?this.countDown():this.GameEnd()}.bind(this),1e3)}},{key:"StageListenter",value:function(){this.start&&this.score.html(this.passNum),this.stage.update()}}]),t}();$(function(){new Game});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUuanMiXSwibmFtZXMiOlsiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJIZWFkZXJNb2RlbCIsInRoaXMiLCJoZWFkZXIiLCIkIiwibWVudSIsIm1lbnVidG4iLCJmaW5kIiwib24iLCJoYXNDbGFzcyIsIm9wZW5tZW51IiwiYmluZCIsIm1lbnVhIiwiZSIsIm1lbnVhQ2xpY2siLCJjdXJyZW50VGFyZ2V0IiwiYXR0ciIsInJlcGxhY2UiLCJzcGxpdCIsInZhbHVlIiwiX3QiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwibWVudWxpbmsiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJjb25zb2xlIiwibG9nIiwiR2FtZV9saXN0IiwicGFnZSIsImJhbm5lcl9zd2lwZXIiLCJTd2lwZXIiLCJzcGVlZCIsIndyYXBwZXJDbGFzcyIsInNsaWRlQ2xhc3MiLCJuZXh0QnV0dG9uIiwicHJldkJ1dHRvbiIsInNsaWRlc1BlclZpZXciLCJzcGFjZUJldHdlZW4iLCJsb29wIiwiYXV0b3BsYXkiLCJhdXRvcGxheURpc2FibGVPbkludGVyYWN0aW9uIiwiZ29idG4iLCJwYXJlbnQiLCJHYW1lIiwicmVhZHkiLCJsb2FkIiwid2luZG93X2xvYWQiLCJnYW1lX2xpc3QiLCJnYW1lMSIsIkdhbWUxIiwiZ2FtZTIiLCJHYW1lMiIsImdhbWUzIiwiR2FtZTMiLCJnYW1lNCIsIkdhbWU0IiwiZ2FtZTUiLCJHYW1lNSIsImZhZGVPdXQiLCJHYW1lTW9kZWwiLCJpbmZvIiwic2NvcmVib2FyZCIsImNsb2NrIiwidGltZXIiLCJzY29yZSIsInN0YXJ0YnRuIiwiZmFpbFBvcHVwIiwiYWdhaW4iLCJiYWNrIiwiR2FtZTFTdGFydCIsIkRldmljZU9yaWVudGF0aW9uRXZlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnREYXRhIiwid2luZG93RGV2aWNlRXZlbnQiLCJmcHMiLCJlbmRUaW1lb3V0Iiwibm93ZW5kVGltZSIsImJnc3BlZWQiLCJ3YXRlcmNoaWxkc3BlZWQiLCJwYXNzQ2FyIiwic3VjY2Vzc0Nhck51bSIsInN0YXJ0IiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0YWdlIiwiY3JlYXRlanMiLCJTdGFnZSIsImdhbWViZyIsIkJpdG1hcCIsImdhbWViZ01vdmllQ2xpcCIsIk1vdmllQ2xpcCIsImFkZENoaWxkIiwiZ2FtZWJnMiIsImNsb25lIiwieCIsImdldFRyYW5zZm9ybWVkQm91bmRzIiwid2lkdGgiLCJnYW1lYmdIIiwiaGVpZ2h0IiwieSIsIndhdGVyY2hpbGQiLCJjYXJMIiwiY2FyTHNwZWVkIiwiY2FyUiIsImNhclJzcGVlZCIsImJvb20iLCJvcmdYIiwib3JnWSIsImJvb21Jbml0IiwiVGlja2VyIiwic2V0RlBTIiwiU3RhZ2VMaXN0ZW50ZXIiLCJodG1sIiwiZmFkZUluIiwic2V0V2F0ZXJjaGlsZFBvc2l0aW9uIiwiR2FtZUNhcklpbnQiLCJzZXRUaW1lb3V0IiwiR2FtZVJhbmRvbUNhciIsImNvdW50RG93biIsImNsZWFyVGltZW91dCIsImhpdFRpbWVvdXQiLCJnYW1lUGFzc2VzIiwiR2FtZTFFbmQiLCJyYW5kb20iLCJNYXRoIiwicm91bmQiLCJ3YXRlcmNoaWxkUG9pbnRMaXN0IiwicHQiLCJnbG9iYWxUb0xvY2FsIiwiX3giLCJfeSIsImhpdFRlc3QiLCJhZnRlckhpdCIsInB0MiIsInVwZGF0ZSIsIndhdGVyY2hpbGREaXJlY3Rpb24iLCJnYW1tYSIsImFicyIsIkdhbWVTdGFydCIsInBhc3NOdW0iLCJHYW1lRW5kIl0s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NEUsWUFDL0I1RSxLQUFLMkQsVUFBVUMsS0FBS0YsVUFDcEIxRCxLQUFLMkQsVUFBVUUsV0FBV3FELFNBQzFCbEgsS0FBSzJELFVBQVVHLE1BQU1vRCxTQUNyQmxILEtBQUtpRixPQUFRLEVBRWJqRixLQUFLdUgsZUFrREw1SCxJQUFLLFVBQ0xzQixNQUFPLFdBaERQakIsS0FBS2lGLE9BQVEsRUFFVmpGLEtBQUs0SSxTQUFXNUksS0FBS2dGLGNBQWUwQyxjQUVuQ2pHLFFBQVFDLElBQUksYUFDWjFCLEtBQUsyRCxVQUFVTyxVQUFVZ0QsYUFvRDdCdkgsSUFBSyxZQUNMc0IsTUFBTyxXQWpEUG9HLFdBQVcsV0FDUHJILEtBQUs0RSxZQUFjLEVBQ25CNUUsS0FBSzJELFVBQVVJLE1BQU1rRCxLQUFLakgsS0FBSzRFLFlBQzVCNUUsS0FBSzRFLFdBQVksRUFBRzVFLEtBQUt1SCxZQUN2QnZILEtBQUs2SSxXQUNacEksS0FBS1QsTUFBTSxRQW9EYkwsSUFBSyxpQkFDTHNCLE1BQU8sV0FqREpqQixLQUFLaUYsT0FHSmpGLEtBQUtnRSxNQUFNaUQsS0FBS2pILEtBQUs0SSxTQUd6QjVJLEtBQUtxRixNQUFNa0QsYUFzRFJwRixJQWpEWGpELEdBQUUsV0FDVSxHQUFJeUMiLCJmaWxlIjoiZ2FtZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEhlYWRlck1vZGVsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuaGVhZGVyID0gJCgnLmhlYWRlcicpO1xyXG4gICAgICAgIHRoaXMubWVudSA9ICQoJy5tZW51Jyk7XHJcblxyXG4gICAgICAgIHRoaXMubWVudWJ0biA9IHRoaXMuaGVhZGVyLmZpbmQoJy5tZW51YnRuJyk7XHJcbiAgICAgICAgdGhpcy5tZW51YnRuLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgaWYodGhpcy5tZW51YnRuLmhhc0NsYXNzKCdvbicpKSB0aGlzLm9wZW5tZW51KGZhbHNlKTtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLm9wZW5tZW51KHRydWUpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIHRoaXMubWVudWEgPSB0aGlzLm1lbnUuZmluZCgnLm1lbnVhJyk7XHJcbiAgICAgICAgdGhpcy5tZW51YS5vbignY2xpY2snLGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICB0aGlzLm1lbnVhQ2xpY2soJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2NsYXNzJykucmVwbGFjZSgnb24nLCcnKS5zcGxpdCgnbWVudWEgJylbMV0ucmVwbGFjZSgnICcsJycpLDApO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBvcGVubWVudShfdCkge1xyXG4gICAgICAgIGlmKF90KXtcclxuICAgICAgICAgICAgdGhpcy5tZW51YnRuLmFkZENsYXNzKCdvbicpO1xyXG4gICAgICAgICAgICAkKCcubWVudScpLmFkZENsYXNzKCdvbicpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLm1lbnVidG4ucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgICAgICQoJy5tZW51JykucmVtb3ZlQ2xhc3MoJ29uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbWVudWFDbGljayhtZW51bGluayl7XHJcbiAgICAgICAgc3dpdGNoIChtZW51bGluaykge1xyXG4gICAgICAgICAgICBjYXNlICdtMSc6XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj1cImxvZ2luX21lbWJlci5waHBcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdtMic6XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj1cImlucXVpcmUucGhwXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbTMnOlxyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9XCJhYm91dC5odG1sXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbTQnOlxyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9XCJhd2FyZF9pbmZvLmh0bWxcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdtNSc6XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj1cImF3YXJkX2xpc3QuaHRtbFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ202JzpcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzaGFyZSBmYicpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ203JzpcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmPVwiZ2FtZV9saXN0Lmh0bWxcIjtcclxuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCfpgYrmiLLlsIfmlrwxMS8y5q2j5byP5LiK57eaJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbTgnOlxyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9XCJsb2dpbl9udW1iZXIucGhwXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbTknOlxyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9XCJpbmRleC5odG1sXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgR2FtZV9saXN0IHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdGNvbnNvbGUubG9nKCdnYW1lIExJU1QnKTtcclxuXHRcdHRoaXMucGFnZSA9ICQoJy5wYWdlLmdhbWVfbGlzdCcpO1xyXG5cdFx0dGhpcy5iYW5uZXJfc3dpcGVyID0gbmV3IFN3aXBlcignLnN3aXBlci1jb250YWluZXInLCB7XHJcblx0XHQgIFx0c3BlZWQ6NjAwLFx0ICBcclxuXHRcdCAgXHR3cmFwcGVyQ2xhc3M6ICdzd2lwZXItd3JhcHBlcicsXHJcblx0XHQgIFx0c2xpZGVDbGFzczogJ3N3aXBlci1zbGlkZScsXHJcblx0XHRcdG5leHRCdXR0b246JCgnLm5leHQnKSxcclxuXHRcdFx0cHJldkJ1dHRvbjokKCcucHJldicpLFxyXG5cdFx0ICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcblx0XHQgICAgc3BhY2VCZXR3ZWVuOiAwLFxyXG5cdFx0ICAgIGxvb3A6IHRydWUsXHJcblx0XHQgICAgYXV0b3BsYXk6NjAwMCxcclxuXHRcdCAgICBhdXRvcGxheURpc2FibGVPbkludGVyYWN0aW9uOmZhbHNlXHJcblx0XHR9KTtcdFxyXG5cdFx0dGhpcy5nb2J0biA9IHRoaXMucGFnZS5maW5kKCcuZ29idG4nKTtcclxuXHRcdHRoaXMuZ29idG4ub24oJ2NsaWNrJyxmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9XCJnYW1lXCIrICQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5hdHRyKCdudW0nKSArJy5odG1sJztcclxuXHRcdH0uYmluZCh0aGlzKSk7XHJcblx0fVxyXG5cdFxyXG59XHJcbmNsYXNzIEdhbWUge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0dGhpcy5yZWFkeSgpO1xyXG5cdFx0dGhpcy5IZWFkZXJNb2RlbCA9IG5ldyBIZWFkZXJNb2RlbCgpO1xyXG5cdFx0JCh3aW5kb3cpLmxvYWQoZnVuY3Rpb24oKXtcclxuXHRcdFx0dGhpcy53aW5kb3dfbG9hZCgpO1xyXG5cdFx0fS5iaW5kKHRoaXMpKTtcclxuXHR9XHJcblx0cmVhZHkoKSB7XHJcblx0XHR0aGlzLnBhZ2UgPSAkKCcucGFnZScpO1xyXG5cclxuXHRcdHN3aXRjaCAodGhpcy5wYWdlLmF0dHIoJ2NsYXNzJykuc3BsaXQoJ3BhZ2UgZ2FtZSAnKVsxXSkge1xyXG5cdFx0XHRjYXNlICdnYW1lX2xpc3QnOlxyXG5cdFx0XHRcdHRoaXMuZ2FtZV9saXN0ID0gbmV3IEdhbWVfbGlzdCgpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdnYW1lMSc6XHJcblx0XHRcdFx0dGhpcy5nYW1lMSA9IG5ldyBHYW1lMSgpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdnYW1lMic6XHJcblx0XHRcdFx0dGhpcy5nYW1lMiA9IG5ldyBHYW1lMigpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdnYW1lMyc6XHJcblx0XHRcdFx0dGhpcy5nYW1lMyA9IG5ldyBHYW1lMygpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdnYW1lNCc6XHJcblx0XHRcdFx0dGhpcy5nYW1lNCA9IG5ldyBHYW1lNCgpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdnYW1lNSc6XHJcblx0XHRcdFx0dGhpcy5nYW1lNSA9IG5ldyBHYW1lNSgpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH1cclxuXHR3aW5kb3dfbG9hZCgpe1xyXG5cdFx0JCgnLmxvYWRpbmcnKS5mYWRlT3V0KCk7XHJcblx0fVxyXG59XHJcbmNsYXNzIEdhbWVNb2RlbCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnBhZ2UgPSAkKCcucGFnZScpO1xyXG4gICAgICAgIHRoaXMuaW5mbyA9IHRoaXMucGFnZS5maW5kKCcuaW5mbycpO1xyXG4gICAgICAgIHRoaXMuc2NvcmVib2FyZCA9IHRoaXMucGFnZS5maW5kKCcuc2NvcmVib2FyZCcpO1xyXG4gICAgICAgIHRoaXMuY2xvY2sgPSB0aGlzLnBhZ2UuZmluZCgnLmNsb2NrJyk7XHJcbiAgICAgICAgdGhpcy50aW1lciA9IHRoaXMuY2xvY2suZmluZCgnLnRpbWVyJyk7IFxyXG4gICAgICAgIHRoaXMuc2NvcmUgPSB0aGlzLnNjb3JlYm9hcmQuZmluZCgnLm51bScpO1xyXG4gICAgICAgIHRoaXMuc3RhcnRidG4gPSB0aGlzLmluZm8uZmluZCgnLnN0YXJ0YnRuJyk7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIHRoaXMuZmFpbFBvcHVwID0gJCgnLmZhaWxQb3B1cCcpO1xyXG4gICAgICAgIHRoaXMuYWdhaW4gPSB0aGlzLmZhaWxQb3B1cC5maW5kKCcuYWdhaW4nKTtcclxuICAgICAgICB0aGlzLmJhY2sgPSB0aGlzLmZhaWxQb3B1cC5maW5kKCcuYmFjaycpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuYmFjay5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmPVwiZ2FtZV9saXN0Lmh0bWxcIjtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG59XHJcbmNsYXNzIEdhbWUxIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLkdhbWVNb2RlbCA9IG5ldyBHYW1lTW9kZWwoKTtcclxuICAgICAgICB0aGlzLkdhbWVNb2RlbC5zdGFydGJ0bi5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHRoaXMuR2FtZTFTdGFydCgpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5HYW1lTW9kZWwuYWdhaW4ub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0aGlzLkdhbWVNb2RlbC5mYWlsUG9wdXAuZmFkZU91dCgpO1xyXG4gICAgICAgICAgICB0aGlzLkdhbWUxU3RhcnQoKTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKHdpbmRvdy5EZXZpY2VPcmllbnRhdGlvbkV2ZW50KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbicsIGZ1bmN0aW9uKGV2ZW50RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53aW5kb3dEZXZpY2VFdmVudChldmVudERhdGEpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5yZWFkeSgpO1xyXG5cdH1cclxuICAgIHJlYWR5KCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdnYW1lMSBpbml0Jyk7XHJcbiAgICAgICAgdGhpcy5mcHMgPSAzMDtcclxuICAgICAgICB0aGlzLmVuZFRpbWVvdXQgPSAzMDtcclxuICAgICAgICB0aGlzLm5vd2VuZFRpbWUgPSB0aGlzLmVuZFRpbWVvdXQ7XHJcbiAgICAgICAgdGhpcy5iZ3NwZWVkID0gLTMwO1xyXG4gICAgICAgIHRoaXMud2F0ZXJjaGlsZHNwZWVkID0gMTU7XHJcbiAgICAgICAgdGhpcy5wYXNzQ2FyID0gMDtcclxuICAgICAgICB0aGlzLnN1Y2Nlc3NDYXJOdW0gPSAxMDtcclxuICAgICAgICB0aGlzLnN0YXJ0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWUxXCIpO1xyXG4gICAgICAgIHRoaXMuc3RhZ2UgPSBuZXcgY3JlYXRlanMuU3RhZ2UodGhpcy5jYW52YXMpO1xyXG5cclxuICAgICAgICAvL2JnXHJcbiAgICAgICAgdGhpcy5nYW1lYmcgPSBuZXcgY3JlYXRlanMuQml0bWFwKCdpbWFnZXMvZ2FtZTFfYmcuanBnJyk7XHJcbiAgICAgICAgdGhpcy5nYW1lYmdNb3ZpZUNsaXAgPSBuZXcgY3JlYXRlanMuTW92aWVDbGlwKCk7XHJcbiAgICAgICAgdGhpcy5nYW1lYmdNb3ZpZUNsaXAuYWRkQ2hpbGQodGhpcy5nYW1lYmcpO1xyXG4gICAgICAgIHRoaXMuc3RhZ2UuYWRkQ2hpbGQodGhpcy5nYW1lYmdNb3ZpZUNsaXApO1xyXG4gICAgICAgIHRoaXMuZ2FtZWJnMiA9IHRoaXMuZ2FtZWJnLmNsb25lKCk7XHJcbiAgICAgICAgdGhpcy5nYW1lYmdNb3ZpZUNsaXAuYWRkQ2hpbGQodGhpcy5nYW1lYmcyKTtcclxuICAgICAgICAkKHdpbmRvdykubG9hZChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0aGlzLmdhbWViZy54ID0gKCB0aGlzLmdhbWViZy5nZXRUcmFuc2Zvcm1lZEJvdW5kcygpLndpZHRoIC0gNjQwICkgLyAyICogLTE7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZWJnMi54ID0gKCB0aGlzLmdhbWViZy5nZXRUcmFuc2Zvcm1lZEJvdW5kcygpLndpZHRoIC0gNjQwICkgLyAyICogLTE7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZWJnSCA9IHRoaXMuZ2FtZWJnLmdldFRyYW5zZm9ybWVkQm91bmRzKCkuaGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLmdhbWViZzIueSA9IHRoaXMuZ2FtZWJnSCotMTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICAvL3dhdGVyY2hpbGRcclxuICAgICAgICB0aGlzLndhdGVyY2hpbGQgPSBuZXcgY3JlYXRlanMuQml0bWFwKCdpbWFnZXMvZ2FtZTFfYmljeWNsZS5wbmcnKTtcclxuICAgICAgICB0aGlzLnN0YWdlLmFkZENoaWxkKHRoaXMud2F0ZXJjaGlsZCk7XHJcbiAgICAgICAgdGhpcy53YXRlcmNoaWxkLnkgPSA4MTQ7XHJcbiAgICAgICAgdGhpcy53YXRlcmNoaWxkLnggPSAyNTE7XHJcblxyXG4gICAgICAgIC8vY2FyXHJcbiAgICAgICAgdGhpcy5jYXJMID0gbmV3IGNyZWF0ZWpzLkJpdG1hcCgnaW1hZ2VzL2dhbWUxX2NhcjEucG5nJyk7XHJcbiAgICAgICAgdGhpcy5zdGFnZS5hZGRDaGlsZCh0aGlzLmNhckwpO1xyXG4gICAgICAgIHRoaXMuY2FyTC54ID0gMTI2O1xyXG4gICAgICAgIHRoaXMuY2FyTC55ID0gLTI5NTtcclxuICAgICAgICB0aGlzLmNhckxzcGVlZCA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyUiA9IG5ldyBjcmVhdGVqcy5CaXRtYXAoJ2ltYWdlcy9nYW1lMV9jYXIyLnBuZycpO1xyXG4gICAgICAgIHRoaXMuc3RhZ2UuYWRkQ2hpbGQodGhpcy5jYXJSKTtcclxuICAgICAgICB0aGlzLmNhclIueCA9IDM1MztcclxuICAgICAgICB0aGlzLmNhclIueSA9IC0yOTU7XHJcbiAgICAgICAgdGhpcy5jYXJSc3BlZWQgPSAwO1xyXG5cclxuICAgICAgICAvL2Jvb21cclxuICAgICAgICB0aGlzLmJvb20gPSBuZXcgY3JlYXRlanMuQml0bWFwKCdpbWFnZXMvZ2FtZTFfZmlyZS5wbmcnKTtcclxuICAgICAgICB0aGlzLnN0YWdlLmFkZENoaWxkKHRoaXMuYm9vbSk7XHJcbiAgICAgICAgdGhpcy5ib29tLm9yZ1ggPSAtMTEwMDtcclxuICAgICAgICB0aGlzLmJvb20ub3JnWSA9IC02OTA7XHJcbiAgICAgICAgdGhpcy5ib29tSW5pdCgpO1xyXG5cclxuICAgICAgICBjcmVhdGVqcy5UaWNrZXIuc2V0RlBTKHRoaXMuZnBzKTtcclxuXHRcdGNyZWF0ZWpzLlRpY2tlci5hZGRFdmVudExpc3RlbmVyKFwidGlja1wiLCB0aGlzLlN0YWdlTGlzdGVudGVyLmJpbmQodGhpcykpO1xyXG5cclxuICAgIH1cclxuICAgIGJvb21Jbml0KCkge1xyXG4gICAgICAgIHRoaXMuYm9vbS54ID0gdGhpcy5ib29tLm9yZ1g7XHJcbiAgICAgICAgdGhpcy5ib29tLnkgPSB0aGlzLmJvb20ub3JnWTtcclxuICAgIH1cclxuICAgIEdhbWVDYXJJaW50KCkge1xyXG4gICAgICAgIHRoaXMuYm9vbUluaXQoKTtcclxuICAgICAgICB0aGlzLmNhclJzcGVlZCA9IDA7XHJcbiAgICAgICAgdGhpcy5jYXJSLnk9IC0yOTU7XHJcbiAgICAgICAgdGhpcy5jYXJMc3BlZWQgPSAwO1xyXG4gICAgICAgIHRoaXMuY2FyTC55PSAtMjk1O1xyXG4gICAgfVxyXG4gICAgR2FtZTFTdGFydCgpe1xyXG4gICAgICAgIHRoaXMucGFzc0NhciA9IDA7XHJcbiAgICAgICAgdGhpcy5ub3dlbmRUaW1lID0gdGhpcy5lbmRUaW1lb3V0O1xyXG4gICAgICAgIHRoaXMuR2FtZU1vZGVsLnRpbWVyLmh0bWwodGhpcy5ub3dlbmRUaW1lKTtcclxuICAgICAgICB0aGlzLkdhbWVNb2RlbC5pbmZvLmZhZGVPdXQoKTtcclxuICAgICAgICB0aGlzLkdhbWVNb2RlbC5zY29yZWJvYXJkLmZhZGVJbigpO1xyXG4gICAgICAgIHRoaXMuR2FtZU1vZGVsLmNsb2NrLmZhZGVJbigpO1xyXG4gICAgICAgIHRoaXMuc2V0V2F0ZXJjaGlsZFBvc2l0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5HYW1lQ2FySWludCgpO1xyXG4gICAgICAgIHRoaXMuc3RhcnQgPSB0cnVlO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdGhpcy5HYW1lUmFuZG9tQ2FyKCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpLDE1MDApO1xyXG5cclxuICAgICAgICB0aGlzLmNvdW50RG93bigpO1xyXG4gICAgfVxyXG4gICAgR2FtZTFFbmQoKSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaGl0VGltZW91dCk7XHJcbiAgICAgICAgdGhpcy5zdGFydCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZih0aGlzLnBhc3NDYXIgPj0gdGhpcy5zdWNjZXNzQ2FyTnVtKSBnYW1lUGFzc2VzKCk7XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dhbWUgb3ZlcicpO1xyXG4gICAgICAgICAgICB0aGlzLkdhbWVNb2RlbC5mYWlsUG9wdXAuZmFkZUluKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY291bnREb3duKCkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdGhpcy5ub3dlbmRUaW1lIC09IDE7XHJcbiAgICAgICAgICAgIHRoaXMuR2FtZU1vZGVsLnRpbWVyLmh0bWwodGhpcy5ub3dlbmRUaW1lKTtcclxuICAgICAgICAgICAgaWYodGhpcy5ub3dlbmRUaW1lID4wKSB0aGlzLmNvdW50RG93bigpO1xyXG4gICAgICAgICAgICBlbHNlIHRoaXMuR2FtZTFFbmQoKTtcclxuICAgICAgICB9LmJpbmQodGhpcyksMTAwMCk7XHJcbiAgICB9XHJcbiAgICBHYW1lUmFuZG9tQ2FyKCkge1xyXG4gICAgICAgIHRoaXMuR2FtZUNhcklpbnQoKTtcclxuICAgICAgICB0aGlzLnJhbmRvbSA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSoxKTtcclxuICAgICAgICBcclxuICAgICAgICBpZih0aGlzLnJhbmRvbT4wKSB0aGlzLmNhckxzcGVlZCA9IHRoaXMuYmdzcGVlZCAqIDkgLyAxMCAqIC0xO1xyXG4gICAgICAgIGVsc2UgIHRoaXMuY2FyUnNwZWVkID0gdGhpcy5iZ3NwZWVkICogMS4yICogLTE7XHJcbiAgICB9XHJcbiAgICBTdGFnZUxpc3RlbnRlcigpe1xyXG4gICAgICAgIGlmKHRoaXMuc3RhcnQpe1xyXG4gICAgICAgICAgICAvL0JHXHJcbiAgICAgICAgICAgIGlmKCB0aGlzLmdhbWViZ01vdmllQ2xpcC55ID49ICB0aGlzLmdhbWViZ0gpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lYmdNb3ZpZUNsaXAueSA9IHRoaXMuZ2FtZWJnTW92aWVDbGlwLnkgLSB0aGlzLmdhbWViZ0g7XHJcbiAgICAgICAgICAgIH1lbHNlIHRoaXMuZ2FtZWJnTW92aWVDbGlwLnkgLT0gdGhpcy5iZ3NwZWVkO1xyXG5cclxuICAgICAgICAgICAgLy93YXRlcmNoaWxkXHJcbiAgICAgICAgICAgIHRoaXMud2F0ZXJjaGlsZC54ICs9IHRoaXMud2F0ZXJjaGlsZHNwZWVkO1xyXG4gICAgICAgICAgICBpZih0aGlzLndhdGVyY2hpbGQueCA8PSAxMDApIHRoaXMud2F0ZXJjaGlsZC54ID0gMTAwO1xyXG4gICAgICAgICAgICBlbHNlIGlmKHRoaXMud2F0ZXJjaGlsZC54ID49IDQxMCkgdGhpcy53YXRlcmNoaWxkLnggPSA0MTA7XHJcblxyXG4gICAgICAgICAgICAvL2NhclxyXG4gICAgICAgICAgICB0aGlzLmNhckwueSArPSB0aGlzLmNhckxzcGVlZDtcclxuICAgICAgICAgICAgdGhpcy5jYXJSLnkgKz0gdGhpcy5jYXJSc3BlZWQ7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuY2FyTC55ID49IDEwOTUpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXNzQ2FyICs9MTtcclxuICAgICAgICAgICAgICAgIHRoaXMuR2FtZVJhbmRvbUNhcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHRoaXMuY2FyUi55ID49IDEwOTUpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXNzQ2FyICs9MTtcclxuICAgICAgICAgICAgICAgIHRoaXMuR2FtZVJhbmRvbUNhcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL2hpdFRlc3RcclxuICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8IHRoaXMud2F0ZXJjaGlsZFBvaW50TGlzdC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHQgPSB0aGlzLmNhckwuZ2xvYmFsVG9Mb2NhbCh0aGlzLndhdGVyY2hpbGRQb2ludExpc3RbaV0uX3gsdGhpcy53YXRlcmNoaWxkUG9pbnRMaXN0W2ldLl95KTtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuY2FyTC5oaXRUZXN0KHB0LngscHQueSkpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9vbS54PXRoaXMud2F0ZXJjaGlsZFBvaW50TGlzdFtpXS5feDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvb20ueT10aGlzLndhdGVyY2hpbGRQb2ludExpc3RbaV0uX3k7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZnRlckhpdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBwdDIgPSB0aGlzLmNhclIuZ2xvYmFsVG9Mb2NhbCh0aGlzLndhdGVyY2hpbGRQb2ludExpc3RbaV0uX3gsdGhpcy53YXRlcmNoaWxkUG9pbnRMaXN0W2ldLl95KTtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuY2FyUi5oaXRUZXN0KHB0Mi54LHB0Mi55KSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib29tLng9dGhpcy53YXRlcmNoaWxkUG9pbnRMaXN0W2ldLl94O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9vbS55PXRoaXMud2F0ZXJjaGlsZFBvaW50TGlzdFtpXS5feTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFmdGVySGl0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL3Njb3JlXHJcbiAgICAgICAgICAgIHRoaXMuR2FtZU1vZGVsLnNjb3JlLmh0bWwodGhpcy5wYXNzQ2FyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zdGFnZS51cGRhdGUoKTtcclxuICAgIH1cclxuICAgIGFmdGVySGl0KCl7XHJcbiAgICAgICAgdGhpcy5zdGFydCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaGl0VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdGhpcy5HYW1lUmFuZG9tQ2FyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnQgPSB0cnVlO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSwxMDAwKTtcclxuXHJcbiAgICB9XHJcbiAgICB3aW5kb3dEZXZpY2VFdmVudChldmVudERhdGEpe1xyXG4gICAgICAgIGlmKHRoaXMuc3RhcnQpe1xyXG4gICAgICAgICAgICB0aGlzLndhdGVyY2hpbGREaXJlY3Rpb24gPSBldmVudERhdGEuZ2FtbWE7XHJcbiAgICAgICAgICAgIGlmKHRoaXMud2F0ZXJjaGlsZERpcmVjdGlvbiA8PSAtMikgdGhpcy53YXRlcmNoaWxkc3BlZWQgPSBNYXRoLmFicyh0aGlzLndhdGVyY2hpbGRzcGVlZCkgKiAtMTtcclxuICAgICAgICAgICAgZWxzZSBpZiggdGhpcy53YXRlcmNoaWxkRGlyZWN0aW9uID49IDIgKSB0aGlzLndhdGVyY2hpbGRzcGVlZCA9IE1hdGguYWJzKHRoaXMud2F0ZXJjaGlsZHNwZWVkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuc2V0V2F0ZXJjaGlsZFBvc2l0aW9uKCk7XHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICB9XHJcbiAgICBzZXRXYXRlcmNoaWxkUG9zaXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy53YXRlcmNoaWxkUG9pbnRMaXN0ID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfeDp0aGlzLndhdGVyY2hpbGQueCArIDY5LFxyXG4gICAgICAgICAgICAgICAgX3k6dGhpcy53YXRlcmNoaWxkLnlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3g6dGhpcy53YXRlcmNoaWxkLnggKyAxMzgsXHJcbiAgICAgICAgICAgICAgICBfeTp0aGlzLndhdGVyY2hpbGQueSArIDEzM1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfeDp0aGlzLndhdGVyY2hpbGQueCArIDY5LFxyXG4gICAgICAgICAgICAgICAgX3k6dGhpcy53YXRlcmNoaWxkLnkgKyAyNjZcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3g6dGhpcy53YXRlcmNoaWxkLngsXHJcbiAgICAgICAgICAgICAgICBfeTp0aGlzLndhdGVyY2hpbGQueSArIDEzM1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfeDp0aGlzLndhdGVyY2hpbGQueCArIDY5LFxyXG4gICAgICAgICAgICAgICAgX3k6dGhpcy53YXRlcmNoaWxkLnkgKyAxMzNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgR2FtZTIge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuR2FtZU1vZGVsID0gbmV3IEdhbWVNb2RlbCgpO1xyXG5cdFx0dGhpcy5HYW1lTW9kZWwuc3RhcnRidG4ub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0aGlzLkdhbWVTdGFydCgpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5HYW1lTW9kZWwuYWdhaW4ub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0aGlzLkdhbWVNb2RlbC5mYWlsUG9wdXAuZmFkZU91dCgpO1xyXG4gICAgICAgICAgICB0aGlzLkdhbWVTdGFydCgpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5yZWFkeSgpO1xyXG5cdH1cclxuICAgIHJlYWR5KCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdnYW1lMiBpbml0Jyk7XHJcbiAgICAgICAgdGhpcy5mcHMgPSAzMDtcclxuICAgICAgICB0aGlzLmVuZFRpbWVvdXQgPSAzMDtcclxuICAgICAgICB0aGlzLm5vd2VuZFRpbWUgPSB0aGlzLmVuZFRpbWVvdXQ7XHJcbiAgICAgICAgdGhpcy5wYXNzTnVtID0gMDtcclxuICAgICAgICB0aGlzLnN1Y2Nlc3NDYXJOdW0gPSAxMDtcclxuICAgICAgICB0aGlzLnN0YXJ0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWUyXCIpO1xyXG4gICAgICAgIHRoaXMuc3RhZ2UgPSBuZXcgY3JlYXRlanMuU3RhZ2UodGhpcy5jYW52YXMpO1xyXG5cclxuICAgICAgICBjcmVhdGVqcy5UaWNrZXIuc2V0RlBTKHRoaXMuZnBzKTtcclxuXHRcdGNyZWF0ZWpzLlRpY2tlci5hZGRFdmVudExpc3RlbmVyKFwidGlja1wiLCB0aGlzLlN0YWdlTGlzdGVudGVyLmJpbmQodGhpcykpO1xyXG5cclxuICAgIH1cclxuICAgIEdhbWVTdGFydCgpe1xyXG4gICAgICAgIHRoaXMubm93ZW5kVGltZSA9IHRoaXMuZW5kVGltZW91dDtcclxuICAgICAgICB0aGlzLkdhbWVNb2RlbC50aW1lci5odG1sKHRoaXMubm93ZW5kVGltZSk7XHJcbiAgICAgICAgdGhpcy5HYW1lTW9kZWwuaW5mby5mYWRlT3V0KCk7XHJcbiAgICAgICAgdGhpcy5HYW1lTW9kZWwuc2NvcmVib2FyZC5mYWRlSW4oKTtcclxuICAgICAgICB0aGlzLkdhbWVNb2RlbC5jbG9jay5mYWRlSW4oKTtcclxuICAgICAgICB0aGlzLnN0YXJ0ID0gdHJ1ZTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNvdW50RG93bigpO1xyXG4gICAgfVxyXG4gICAgR2FtZUVuZCgpIHtcclxuICAgICAgICB0aGlzLnN0YXJ0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmKHRoaXMucGFzc051bSA+PSB0aGlzLnN1Y2Nlc3NDYXJOdW0pIGdhbWVQYXNzZXMoKTtcclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnR2FtZSBvdmVyJyk7XHJcbiAgICAgICAgICAgIHRoaXMuR2FtZU1vZGVsLmZhaWxQb3B1cC5mYWRlSW4oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb3VudERvd24oKSB7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0aGlzLm5vd2VuZFRpbWUgLT0gMTtcclxuICAgICAgICAgICAgdGhpcy5HYW1lTW9kZWwudGltZXIuaHRtbCh0aGlzLm5vd2VuZFRpbWUpO1xyXG4gICAgICAgICAgICBpZih0aGlzLm5vd2VuZFRpbWUgPjApIHRoaXMuY291bnREb3duKCk7XHJcbiAgICAgICAgICAgIGVsc2UgdGhpcy5HYW1lRW5kKCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpLDEwMDApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBTdGFnZUxpc3RlbnRlcigpe1xyXG4gICAgICAgIGlmKHRoaXMuc3RhcnQpe1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy9zY29yZVxyXG4gICAgICAgICAgICB0aGlzLnNjb3JlLmh0bWwodGhpcy5wYXNzTnVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zdGFnZS51cGRhdGUoKTtcclxuICAgIH1cclxuICAgIFxyXG59XHJcblxyXG4kKGZ1bmN0aW9uKCkge1xyXG5cdHZhciBnYW1lID0gbmV3IEdhbWUoKTtcclxufSk7XHJcblxyXG4iXX0=
